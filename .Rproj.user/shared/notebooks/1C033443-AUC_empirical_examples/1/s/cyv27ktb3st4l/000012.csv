"0","folder <- ""Suppression of insulin feedback enhances the efficacy of PI3K inhibitors"""
"0","filename <- ""41586_2018_343_MOESM4_ESM.xlsx"""
"0","file_path <- here(data_path, folder, filename)"
"0","pi3k_wide <- read_excel(file_path,"
"0","                    col_names = FALSE,"
"0","                    sheet = ""Figure 1A (Glucose Curves)"","
"0","                    range = ""A2:U9"") %>%"
"0","  data.table()"
"1",""
"1","-"
"1",""
"1","/"
"1","                                                                              "
"1",""
"2","New names:
* `` -> ...1
* `` -> ...2
* `` -> ...3
* `` -> ...4
* `` -> ...5
* â€¦ and 16 more problems
"
"0","# give columns names"
"0","colnames(pi3k_wide) <- c("
"0","  ""time"","
"0","  paste0(""Vehicle_"", 1:5),"
"0","  paste0(""BKM120"", 1:5),"
"0","  paste0(""BYL719"", 1:5),"
"0","  paste0(""GDC0032"", 1:5)"
"0",")"
"0","# melt 1"
"0","pi3k_long <- melt(pi3k_wide, "
"0","              id.vars = c(""time""),"
"0","              measure.vars = patterns(""^Vehicle"","
"0","                                      ""^BKM120"","
"0","                                      ""^BYL719"","
"0","                                      ""GDC0032""),"
"0","              variable.name = ""rep"","
"0","              value.name = c(""Vehicle"","
"0","                                ""BKM120"","
"0","                                ""BYL719"","
"0","                                ""GDC0032""))"
"0","# melt 2"
"0","pi3k_long <- melt(pi3k_long, "
"0","              id.vars = c(""time"", ""rep""),"
"0","              measure.vars = c(""Vehicle"","
"0","                                ""BKM120"","
"0","                                ""BYL719"","
"0","                                ""GDC0032""),"
"0","              variable.name = ""treatment"","
"0","              value.name = ""glucose"")"
"0","pi3k_long[, time:=factor(time)]"
"0","pi3k_long[, id := paste(treatment, rep, sep=""_"")]"
"0","pi3k_wide <- dcast(data = pi3k_long,"
"0","                    id + treatment + rep ~ time, value.var = ""glucose"")"
"0","times <- c(0, 15, 30, 60, 90, 120, 180, 240)"
"0","time_cols <- paste0(""glucose"", times)"
"0","setnames(pi3k_wide, old=as.character(times), new=time_cols)"
"0","Y <- pi3k_wide[, .SD, .SDcols = time_cols]"
"0","pi3k_wide[, auc := apply(Y, 1, auc, x=times)] #check"
"0","pi3k_wide[, iauc := apply(Y, 1, auc, x=times, method=""iauc"")]"
"0","pi3k_wide[, ipos.auc := apply(Y, 1, auc, x=times, method=""pos.iauc"")]"
"0","pi3k_wide[, glucose_mean := apply(Y, 1, mean)]"
"0","pi3k_wide[, glucose_change := glucose_mean - glucose0]"
